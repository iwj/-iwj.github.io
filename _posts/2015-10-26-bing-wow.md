---
layout: post
title: 必应美图下载工具
categories: [Python, 项目]
---

## BingWow：下载必应今日美图

必应的美图非常棒，以致于我经常会将其保存到本地。想尝试用 Python 抓取并下载，练练手的同时又方便以后自动化下载。

那么，开始吧！

## 查看必应首页结构

使用 Chrome 浏览器作为辅助工具，主要用到了开发者工具。

另外推荐一个非常好用的的插件 JSONview ，将 json 格式化并用不同颜色进行代码高亮。

主要用到的工具和技术：

* Chrome

* Python 2.7

* Windows 8.1 x64

* bs4

发现 Bing 的下载按钮下载的是用水印的。

而且打开开发者工具后在网页资源 Resources 里的 Images 下也没看到，说明这张图片时按了下载按钮之后在服务器生成的。

而在网页资源 Resources 里的那张是无水印的，分辨率为1080p 。

这就是我想要的。

<img src="/img/GoatIslandLighthouse_shutterstockRF_6452540_768_HD_ZH-CN36482650.jpg">

## 抓取图片

查阅资料，其中有一位前辈提供了一个非常关键的 json 地址：

<a href="http://www.bkjia.com/Pythonjc/514568.html#top">Python抓取Bing主页背景图片</a>

使得寻找图像 URL 的工作省了不少力

本来还酝酿了两种思路

* 模拟浏览器访问

* 寻找可用的包或者自己用代码实现获取 Resources 里的文件

在后续的优化中尝试别的思路，或者自己尝试分析如何找到定位到那个 json 的，因为必应首页的源码里有很多个 json 地址，非常好奇这位前辈是如何定位的。

## 使用 PyInstaller 3.0 打包

查阅了一些网友的经验，发现 PyInstaller 更适合我当前的使用情境。

走了点弯路。

先是错误地在 Mac 下尝试，好在阿黎说 Windows 下也有与 \*nix 同样语法的终端。对于用惯了 \*nix 的我，这让我对田牌系统的好感提升，甚至扬言要转到 Windows 平台。

后来又是去官网下载安装包。发现无法安装，无法直接使用。最后，在终端里一枚命令就搞定，连作为先决条件的另外一个包也自动装上了。多美丽！

具体情况是，easy_install 无法安装，换用 pip 成功装上。

生成过程非常简单，一枚命令就完成。

若要生成一个独立的 exe 文件，加上 -F 参数即可。

`pyinstaller -F myscript.py`

## 收获与思考

今年春天，在一次下班的路上，与桃哥讨论问题时，他就告诉过我：要善于总结。

做完一个项目，或者告一段落时，就做个总结，回顾当前用到了哪些技术，否则白做。

此次的思考：

1）抛弃下载安装包手动安装思维，再次强化终端思维。

* 终端好用，但是你却不青睐它

* 1条命令抵 x 次鼠标点击 y 次鼠标移动 z 次视线移动以及 (x+y)^z 秒时间

2）别恐惧英文，直面文档

* 用 pip 之前的那里，翻阅了中文的资料，得到的答案匹配度非常低

* 最后还是去看文档，发现也没那么难读，而且 Google 翻译又是那么快捷好用

* 用自信和自己向往的工程师文化鼓舞自己，愉悦地、欣然地阅读英文的文档

## 下载

目前释放了一个 alpha 版，同样喜欢必应美图的同学可以下载来使用，也可以在功能上提意见。

事实上，目前功能单一到没什么好提意见的。不信？看使用说明：

* 直接双击程序，即可下载必应美图到当前路径。

下载链接

目前只有 Windows 版：<a href="https://raw.githubusercontent.com/iwj/BingWow/master/alpha/BingWow.exe">BingWow.exe</a>
